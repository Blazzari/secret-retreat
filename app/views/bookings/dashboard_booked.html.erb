<div class ="container mt-4 mb-5">
  <div class="d-flex justify-content-start align-items-center mb-4">
    <div>
      <%= link_to "My bookings", dashboard_path, class: "button me-3" %>
    </div>
    <div>
      <%= link_to "My booked rooms",dashboard_booked_path , class: "button" %>
    </div>
  </div>

  <h2 class= "mb-2">Booking for your rooms :</h2>

  <% @rooms.each do |room| %>
    <% bookings = room.bookings %>
      <% bookings.each do |booking| %>
      <div class="d-flex  flex-row card rounded-4 p-3 mb-4">
        <div>
          <%= cl_image_tag booking.room.photo.key, height: 100, width: 150, crop: :fill, class: "rounded-4 me-3" %>
        </div>
        <div class="d-flex justify-content-between align-items-center w-100 mb-0">
            <div class="mb-2">
              <h4>Your stay at "<%= booking.room.title %>"</h4>
              <p class="mb-2">From : <%= booking.start_date %> - To : <%= booking.end_date %> - <i class="fa-solid fa-at me-2"></i> <%= booking.user.email %></p>
              <p class="mb-2"><i class="fa-sharp fa-solid fa-calendar-days me-2"></i> days - <%= booking.price %> <i class="fa-solid fa-dollar-sign me-2"></i>- <i class="fa-solid fa-at me-2"></i> <%= booking.user.email %><i class="fa-solid fa-dollar-sign me-2"></i></p>

              <% if booking.validation = "pending" %>
                <p class="mb-0"><i class="fa-solid fa-hourglass-half"></i> Booking to be confirmed</p>
              <% elsif booking.validation = "confirmed" %>
                <p class="mb-0"><i class="fa-solid fa-check"></i> Booking confirmed</p>
              <% elsif booking.validation = "rejected"%>
                <p class="mb-0"><i class="fa-solid fa-check"></i> Booking rejected</p>
              <% end %>
            </div>

            <div class="d-flex justify-content-start align-items-center">
              <% if booking.validation = "pending" %>
                <%= link_to "Confirm booking", booking_path(booking), class: "button me-2" %>
                <%= link_to "Reject booking", booking_path(booking), class: "button" %>
              <% end %>
            </div>
        </div>
      </div>
    <% end %>
  <% end %>

</div>
